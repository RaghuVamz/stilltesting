/**
 * byte-buffer v1.0.3
 * Copyright (c) 2012-2014 Tim Kurvers <tim@moonsphere.net>
 *
 * Wrapper for JavaScript's ArrayBuffer/DataView.
 *
 * Licensed under the MIT license.
 */

!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.ByteBuffer=t()}}(function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(t){var r=e[s][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e){var r,n;n=t("attr-accessor"),r=function(){function t(t,e,n){var i;null==t&&(t=0),null==e&&(e=s.BIG_ENDIAN),null==n&&(n=!1),this._buffer=null,this._raw=null,this._view=null,this._order=!!e,this._implicitGrowth=!!n,this._index=0,i=r(t,!0),i||(i=new ArrayBuffer(t)),this.buffer=i}var r,i,o,s,a,u,h;return e.exports=t,t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,s=t,h=n.accessors(t),i=h[0],a=h[1],t.prototype._sanitizeIndex=function(){return this._index<0&&(this._index=0),this._index>this.length?this._index=this.length:void 0},r=function(t,e){var r;if(null==e&&(e=!1),null!=t.byteLength)return null!=t.buffer?e?t.buffer.slice(0):t.buffer:e?t.slice(0):t;if(null==t.length)return null;if(t.constructor===String)return null;try{return new Uint8Array(t).buffer}catch(n){return r=n,null}},i({buffer:function(){return this._buffer}}),a({buffer:function(t){return this._buffer=t,this._raw=new Uint8Array(this._buffer),this._view=new DataView(this._buffer),this._sanitizeIndex()}}),i({raw:function(){return this._raw}}),i({view:function(){return this._view}}),i({length:function(){return this._buffer.byteLength}}),i({byteLength:function(){return this.length}}),i({order:function(){return this._order}}),a({order:function(t){return this._order=!!t}}),i({implicitGrowth:function(){return this._implicitGrowth}}),a({implicitGrowth:function(t){return this._implicitGrowth=!!t}}),i({index:function(){return this._index}}),a({index:function(t){if(0>t||t>this.length)throw new RangeError("Invalid index "+t+", should be between 0 and "+this.length);return this._index=t}}),t.prototype.front=function(){return this._index=0,this},t.prototype.end=function(){return this._index=this.length,this},t.prototype.seek=function(t){return null==t&&(t=1),this.index+=t,this},i({available:function(){return this.length-this._index}}),o=function(t,e){return function(r){var n;if(null==r&&(r=this._order),e>this.available)throw new Error("Cannot read "+e+" byte(s), "+this.available+" available");return n=this._view[t](this._index,r),this._index+=e,n}},u=function(t,e){return function(r,n){var i;if(null==n&&(n=this._order),i=this.available,e>i){if(!this._implicitGrowth)throw new Error("Cannot write "+r+" using "+e+" byte(s), "+i+" available");this.append(e-i)}return this._view[t](this._index,r,n),this._index+=e,this}},t.prototype.readByte=o("getInt8",1),t.prototype.readUnsignedByte=o("getUint8",1),t.prototype.readShort=o("getInt16",2),t.prototype.readUnsignedShort=o("getUint16",2),t.prototype.readInt=o("getInt32",4),t.prototype.readUnsignedInt=o("getUint32",4),t.prototype.readFloat=o("getFloat32",4),t.prototype.readDouble=o("getFloat64",8),t.prototype.writeByte=u("setInt8",1),t.prototype.writeUnsignedByte=u("setUint8",1),t.prototype.writeShort=u("setInt16",2),t.prototype.writeUnsignedShort=u("setUint16",2),t.prototype.writeInt=u("setInt32",4),t.prototype.writeUnsignedInt=u("setUint32",4),t.prototype.writeFloat=u("setFloat32",4),t.prototype.writeDouble=u("setFloat64",8),t.prototype.read=function(t){var e;if(null==t&&(t=this.available),t>this.available)throw new Error("Cannot read "+t+" byte(s), "+this.available+" available");if(0>=t)throw new RangeError("Invalid number of bytes "+t);return e=new s(this._buffer.slice(this._index,this._index+t),this.order),this._index+=t,e},t.prototype.write=function(t){var e,n,i;if(t instanceof Uint8Array)i=t;else{if(n=r(t),!n)throw new TypeError("Cannot write "+t+", not a sequence");i=new Uint8Array(n)}if(e=this.available,i.byteLength>e){if(!this._implicitGrowth)throw new Error("Cannot write "+t+" using "+i.byteLength+" byte(s), "+this.available+" available");this.append(i.byteLength-e)}return this._raw.set(i,this._index),this._index+=i.byteLength,this},t.prototype.readString=function(t){var e,r,n,i,o,s,a,u,h,l,f,p,d;if(null==t&&(t=this.available),t>this.available)throw new Error("Cannot read "+t+" byte(s), "+this.available+" available");if(0>=t)throw new RangeError("Invalid number of bytes "+t);for(p=this._raw,a=[],o=0,e=r=n=i=null,d=this._index+t;this._index<d;)if(e=p[this._index],128>e)a[o++]=e,this._index++;else{if(194>e)throw new Error("Unexpected continuation byte");if(224>e){if(r=p[this._index+1],128>r||r>191)throw new Error("Bad continuation byte");a[o++]=((31&e)<<6)+(63&r),this._index+=2}else if(240>e){if(r=p[this._index+1],128>r||r>191)throw new Error("Bad continuation byte");if(n=p[this._index+2],128>n||n>191)throw new Error("Bad continuation byte");a[o++]=((15&e)<<12)+((63&r)<<6)+(63&n),this._index+=3}else{if(!(245>e))throw new Error("Illegal byte");if(r=p[this._index+1],128>r||r>191)throw new Error("Bad continuation byte");if(n=p[this._index+2],128>n||n>191)throw new Error("Bad continuation byte");if(i=p[this._index+3],128>i||i>191)throw new Error("Bad continuation byte");u=((7&e)<<18)+((63&r)<<12)+((63&n)<<6)+(63&i),u-=65536,a[o++]=55296+((1047552&u)>>>10),a[o++]=56320+(1023&u),this._index+=4}}if(f=65536,l=a.length,f>l)return String.fromCharCode.apply(String,a);for(s=[],h=0;l>h;)s.push(String.fromCharCode.apply(String,a.slice(h,h+f))),h+=f;return s.join("")},t.prototype.writeString=function(t){var e,r,n,i,o,s,a;for(r=[],a=t.length,s=0,e=0;a>s;){if(n=t.charCodeAt(s),127>=n)r[e++]=n;else if(2047>=n)r[e++]=192|(1984&n)>>>6,r[e++]=128|63&n;else if(55295>=n||n>=57344&&65535>=n)r[e++]=224|(61440&n)>>>12,r[e++]=128|(4032&n)>>>6,r[e++]=128|63&n;else{if(s===a-1)throw new Error("Unpaired surrogate "+t[s]+" (index "+s+")");if(o=t.charCodeAt(++s),55296>n||n>56319||56320>o||o>57343)throw new Error("Unpaired surrogate "+t[s]+" (index "+s+")");i=((1023&n)<<10)+(1023&o)+65536,r[e++]=240|(1835008&i)>>>18,r[e++]=128|(258048&i)>>>12,r[e++]=128|(4032&i)>>>6,r[e++]=128|63&i}++s}return this.write(r),r.length},t.prototype.readUTFChars=t.prototype.readString,t.prototype.writeUTFChars=t.prototype.writeString,t.prototype.readCString=function(){var t,e,r,n;for(t=this._raw,r=t.length,e=this._index;0!==t[e]&&r>e;)++e;return r=e-this._index,r>0?(n=this.readString(r),this.readByte(),n):null},t.prototype.writeCString=function(t){var e;return e=this.writeString(t),this.writeByte(0),++e},t.prototype.prepend=function(t){var e;if(0>=t)throw new RangeError("Invalid number of bytes "+t);return e=new Uint8Array(this.length+t),e.set(this._raw,t),this._index+=t,this.buffer=e.buffer,this},t.prototype.append=function(t){var e;if(0>=t)throw new RangeError("Invalid number of bytes "+t);return e=new Uint8Array(this.length+t),e.set(this._raw,0),this.buffer=e.buffer,this},t.prototype.clip=function(t,e){var r;return null==t&&(t=this._index),null==e&&(e=this.length),0>t&&(t=this.length+t),r=this._buffer.slice(t,e),this._index-=t,this.buffer=r,this},t.prototype.slice=function(t,e){var r;return null==t&&(t=0),null==e&&(e=this.length),r=new s(this._buffer.slice(t,e),this.order)},t.prototype.clone=function(){var t;return t=new s(this._buffer.slice(0),this.order,this.implicitGrowth),t.index=this._index,t},t.prototype.reverse=function(){return Array.prototype.reverse.call(this._raw),this._index=0,this},t.prototype.toArray=function(){return Array.prototype.slice.call(this._raw,0)},t.prototype.toString=function(){var t;return t=this._order===s.BIG_ENDIAN?"big-endian":"little-endian","[ByteBuffer; Order: "+t+"; Length: "+this.length+"; Index: "+this._index+"; Available: "+this.available+"]"},t.prototype.toHex=function(t){return null==t&&(t=" "),Array.prototype.map.call(this._raw,function(t){return("00"+t.toString(16).toUpperCase()).slice(-2)}).join(t)},t.prototype.toASCII=function(t,e,r){var n;return null==t&&(t=" "),null==e&&(e=!0),null==r&&(r="ï¿½"),n=e?" ":"",Array.prototype.map.call(this._raw,function(t){return 32>t||t>126?n+r:n+String.fromCharCode(t)}).join(t)},t}()},{"attr-accessor":2}],2:[function(t,e){var r,n={}.hasOwnProperty;r=function(t){var e,r,i;e={};for(r in t)n.call(t,r)&&(i=t[r],e[r]=i);return e},e.exports={reader:function(t,e){return null==e&&(e={}),e=r(e),null==e.configurable&&(e.configurable=!0),function(r){var n,i;for(i in r)n=r[i],e.get=n,Object.defineProperty(t,i,e);return void 0}},writer:function(t,e){return null==e&&(e={}),e=r(e),null==e.configurable&&(e.configurable=!0),function(r){var n,i;for(n in r)i=r[n],e.set=i,Object.defineProperty(t,n,e);return void 0}},accessor:function(t,e){return null==e&&(e={}),[this.reader(t,e),this.writer(t,e)]},accessors:function(t,e){var n;return null==e&&(e={}),n=r(e),null==n.enumerable&&(n.enumerable=!0),this.accessor(t.prototype,n).concat(this.accessor(t,e))}}},{}]},{},[1])(1)});